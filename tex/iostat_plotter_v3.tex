% Generator: GNU source-highlight, by Lorenzo Bettini, http://www.gnu.org/software/src-highlite
\noindent
\mbox{}\textit{\#!/usr/bin/python2} \\
\mbox{}\textit{\#\ -*-\ coding:\ utf-8\ -*-} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Enhanced\ data\ plotter\ for\ iostat\ output.\ Feb.\ 22\ 2014} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Copyright\ Jeffrey\ B.\ Layton} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ License:\ GNU\ GPL\ v2\ (http://www.gnu.org/licenses/old-licenses/gpl-2.0.html)} \\
\mbox{}\textit{\#\ Version\ 2,\ June\ 1991} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Copyright\ (C)\ 1989,\ 1991\ Free\ Software\ Foundation,\ Inc.\ \ } \\
\mbox{}\textit{\#\ 51\ Franklin\ Street,\ Fifth\ Floor,\ Boston,\ MA\ \ 02110-1301,\ USA} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Everyone\ is\ permitted\ to\ copy\ and\ distribute\ verbatim\ copies} \\
\mbox{}\textit{\#\ of\ this\ license\ document,\ but\ changing\ it\ is\ not\ allowed.} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ To\ run\ the\ application\ first\ gather\ the\ iostat\ information\ using:} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ [laytonjb\ \textasciitilde{}]\$\ iostat\ -c\ -d\ -x\ -t\ -m\ /dev/sda\ 1\ 100\ \textgreater{}\ iostat.out} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ where\ /dev/sda\ is\ the\ specific\ device\ you\ want\ to\ monitor\ which\ is} \\
\mbox{}\textit{\#\ up\ to\ you.\ If\ you\ don't\ put\ a\ device\ there,\ iostat\ will\ monitor} \\
\mbox{}\textit{\#\ all\ devices.\ For\ example:} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ [laytonjb\ \textasciitilde{}]\$\ iostat\ -c\ -d\ -x\ -t\ -m\ 1\ 100\ \textgreater{}\ iostat.out} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ "{}1\ 100"{}\ which\ tells\ iostat\ to\ use\ "{}1"{}\ second\ intervals\ \ and\ "{}100"{}\ } \\
\mbox{}\textit{\#\ means\ to\ gather\ data\ for\ 100\ time\ (or\ 100\ sceonds\ in\ this\ case).} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Then\ to\ run\ iostat$\_$plotter,\ the\ command\ is,} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ [laytonjb\ \textasciitilde{}]\$\ iostat$\_$plotter.py\ iostat.out} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ where\ "{}iostat.out"{}\ is\ the\ output\ from\ iostat.\ The\ code\ is\ written} \\
\mbox{}\textit{\#\ in\ Python\ (obviously)\ and\ uses\ the\ shlex,\ time,\ os,\ and\ matplotlib} \\
\mbox{}\textit{\#\ modules.\ iostat$\_$plotter\ is\ smart\ enough\ to\ gather\ the\ data\ for\ each} \\
\mbox{}\textit{\#\ device\ and\ plot\ them\ separately.} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ Alternatively,\ you\ can\ run\ iostat$\_$plotter.py\ as,} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ [laytonjb\ \textasciitilde{}]\$\ iostat$\_$plotter.py\ -c\ iostat.out} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ where\ the\ option\ "{}-c"{}\ stands\ for\ "{}combined"{}\ plots\ which\ plots\ all} \\
\mbox{}\textit{\#\ of\ the\ devices\ on\ the\ same\ plot.} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ When\ iostat$\_$plotter\ is\ done\ it\ will\ create\ a\ subdirectory\ "{}HTML$\_$REPORT"{}} \\
\mbox{}\textit{\#\ that\ contains\ the\ plots\ and\ an\ html\ file\ "{}report.html"{}.\ Open\ that} \\
\mbox{}\textit{\#\ html\ file\ in\ a\ browser\ or\ word\ processor\ and\ you\ will\ see\ the\ plots} \\
\mbox{}\textit{\#\ and\ a\ small\ write-up\ about\ them.\ Feel\ free\ to\ modify\ the\ code\ but} \\
\mbox{}\textit{\#\ please\ send\ back\ changes.} \\
\mbox{}\textit{\#} \\
\mbox{}\textit{\#\ To\ use\ accents} \\
\mbox{}\textbf{from}\ $\_$$\_$future$\_$$\_$\ \textbf{import}\ unicode$\_$literals \\
\mbox{} \\
\mbox{}\textbf{import}\ sys \\
\mbox{}\textbf{try}: \\
\mbox{}\ \ \ \textbf{import}\ shlex\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Needed\ for\ splitting\ input\ lines} \\
\mbox{}\textbf{except}\ ImportError: \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Cannot\ import\ shlex\ module\ -\ this\ is\ needed\ for\ this\ application."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Exiting..."{}} \\
\mbox{}\ \ \ sys.\textbf{exit}(); \\
\mbox{} \\
\mbox{}\textbf{try}: \\
\mbox{}\ \ \ \textbf{import}\ time;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Needed\ for\ time\ conversion\ function} \\
\mbox{}\ \ \ time$\_$var\ =\ 1 \\
\mbox{}\textbf{except}: \\
\mbox{}\ \ \ time$\_$var\ =\ 0; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Cannot\ find\ time\ module\ -\ this\ is\ needed\ for\ this\ application."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Exiting..."{}} \\
\mbox{}\ \ \ sys.\textbf{exit}(); \\
\mbox{} \\
\mbox{}\textbf{try}: \\
\mbox{}\ \ \ \textbf{import}\ matplotlib.pyplot\ as\ plt;\ \ \ \textit{\#\ Needed\ for\ plots} \\
\mbox{}\ \ \ matplotlib$\_$var\ =\ 1 \\
\mbox{}\textbf{except}: \\
\mbox{}\ \ \ matplotlib$\_$var\ =\ 0; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Cannot\ find\ matplotlib\ -\ this\ is\ needed\ for\ this\ application."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Exiting..."{}} \\
\mbox{}\ \ \ sys.\textbf{exit}(); \\
\mbox{} \\
\mbox{}\textbf{try}: \\
\mbox{}\ \ \ \textbf{import}\ os\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Needed\ for\ mkdir} \\
\mbox{}\textbf{except}\ ImportError: \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Cannot\ import\ os\ module\ -\ this\ is\ needed\ for\ this\ application."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Exiting..."{}} \\
\mbox{}\ \ \ sys.\textbf{exit}(); \\
\mbox{} \\
\mbox{}\textbf{try}: \\
\mbox{}\ \ \ \textbf{import}\ pickle\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Needed\ for\ pickle} \\
\mbox{}\ \ \ pickle$\_$success\ =\ 1; \\
\mbox{}\textbf{except}\ ImportError: \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Cannot\ import\ pickle\ module\ -\ this\ is\ not\ needed\ for\ this\ application."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Continuing\ to\ process"{}}; \\
\mbox{}\ \ \ pickle$\_$success\ =\ 0; \\
\mbox{} \\
\mbox{}\textit{\#\ -\/-\/--\/-\/--\/-\/--\/-\/--\/-\/--\/-\/--\/-\/--\/-\/--\/-\/--\/-\/-} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{help$\_$out}(): \\
\mbox{}\ \ \ \textit{\#\ prints\ out\ help\ information\ and\ stops} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}This\ application\ creates\ a\ short\ HTML\ based\ report\ from\ iostat\ output"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}(part\ of\ the\ sysstat\ tools).\ The\ report\ includes\ plots\ that\ help"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}analyze\ the\ output.\ It\ can\ adapt\ to\ sysstat\ v9.x\ format\ or\ sysstat"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}v10.x\ output\ (it\ is\ slightly\ different).\ Many\ distributions\ such\ as"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}CentOS\ or\ Red\ Hat\ use\ sysstat\ version\ 9.x.\ However,\ it\ is\ recommended"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}that\ you\ upgrad\ to\ sysstat\ 10.x\ because\ you\ get\ slightly\ more\ information."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}It\ is\ not\ a\ difficult\ task\ but\ be\ sure\ you\ install\ over\ the\ previous"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}version."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}To\ run\ the\ application\ first\ gather\ the\ iostat\ information\ using:\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}the\ following\ example."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}[laytonjb\ \textasciitilde{}]\$\ iostat\ -c\ -d\ -x\ -t\ -m\ /dev/sda\ 1\ 100\ \textgreater{}\ iostat.out\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}where\ the\ \textbackslash{}"{}-c\textbackslash{}"{}\ option\ displays\ the\ CPU\ utilization,\ the\ \textbackslash{}"{}-d\textbackslash{}"{}\ option"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}displays\ the\ device\ utilization,\ the\ \textbackslash{}"{}-x\textbackslash{}"{}\ option\ displays\ extended"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}statistics,\ and\ the\ \textbackslash{}"{}-m\textbackslash{}"{}\ option\ diplays\ the\ statistics\ in\ megabytes"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}per\ second.\ The\ options\ \textbackslash{}"{}1\ 100\textbackslash{}"{}\ tell\ iostat\ to\ use\ \textbackslash{}"{}1\textbackslash{}"{}\ second\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}intervals\ and\ \textbackslash{}"{}100\textbackslash{}"{}\ means\ to\ gather\ data\ for\ 100\ internvals\ (or\ 100"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}seconds\ in\ this\ case).\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}After\ the\ \textbackslash{}"{}-m\textbackslash{}"{}\ option\ is\ /dev/sda\ which\ is\ the\ specific\ device"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}you\ want\ to\ monitor.\ This\ option\ is\ up\ to\ you.\ If\ you\ don't\ put\ a\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}device\ there,\ iostat\ will\ monitor\ all\ devices.\ For\ example:"{}} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}[laytonjb\ \textasciitilde{}]\$\ iostat\ -c\ -d\ -x\ -t\ -m\ 1\ 100\ \textgreater{}\ iostat.out\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}which\ captures\ the\ data\ from\ all\ devices."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}In\ these\ two\ examples,\ the\ output\ from\ iostat\ is\ send\ to\ a\ file\ which\ is"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\textbackslash{}"{}iostat.out\textbackslash{}"{}.\ You\ can\ name\ the\ file\ anything\ you\ want\ but\ be\ sure\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}note\ the\ name\ of\ the\ file."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Then\ to\ run\ iostat$\_$plotter\ using\ the\ iostat\ output\ file,\ the\ command\ is,\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}[laytonjb\ \textasciitilde{}]\$\ iostat$\_$plotter.py\ iostat.out\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}where\ \textbackslash{}"{}iostat.out\textbackslash{}"{}\ is\ the\ output\ from\ iostat.\ The\ code\ is\ written\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}in\ Python\ (obviously)\ and\ uses\ the\ shlex,\ time,\ os,\ and\ matplotlib\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}modules.\ Be\ sure\ this\ libraries\ are\ installed\ on\ your\ system."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}You\ can\ run\ iostat$\_$plotter\ in\ one\ of\ two\ ways.\ The\ first\ way\ creates\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}the\ set\ of\ plots\ for\ each\ device\ on\ the\ node.\ In\ this\ version\ of\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}iostat$\_$plotter,\ 11\ plots\ are\ created\ per\ device,\ so\ if\ you\ have\ two"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}devices\ on\ the\ node,\ then\ you\ will\ ahve\ a\ total\ of\ 22\ plots."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}The\ other\ way\ to\ run\ niostat$\_$plotter\ is\ to\ combine\ the\ results\ for\ each"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}device\ in\ the\ plots.\ This\ means\ you\ will\ have\ only\ 11\ plots\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}in\ the\ HTML\ report\ even\ if\ you\ have\ more\ than\ one\ device.\ You\ run\ this\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}with\ the\ following\ command:"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}[laytonjb\ \textasciitilde{}]\$\ iostat$\_$plotter.py\ -c\ iostat.out\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}The\ option\ \textbackslash{}"{}-c\textbackslash{}"{}\ tells\ iostat$\_$plotter\ to\ \textbackslash{}"{}combine\textbackslash{}"{}\ the\ results\ from"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}all\ of\ the\ devices\ into\ a\ single\ plot.\ Currently,\ you\ can\ analyze\ about"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}8\ devices.\ With\ more\ than\ 8\ devices,\ the\ legend\ labels\ run\ into\ each\ other."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}When\ iostat$\_$plotter\ is\ done\ it\ will\ create\ a\ subdirectory\ \textbackslash{}"{}HTML$\_$REPORT\textbackslash{}"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}that\ contains\ the\ plots\ and\ an\ html\ file\ \textbackslash{}"{}report.html\textbackslash{}"{}.\ Open\ that\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}html\ file\ in\ a\ browser\ or\ word\ processor\ and\ you\ will\ see\ the\ plots\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}and\ a\ small\ write-up\ about\ them.\ Feel\ free\ to\ modify\ the\ code\ but\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}please\ send\ back\ changes.\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{} \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{Three$\_$Chart}(x1,\ y1,\ x2,\ y2,\ x3,\ y3,\ xlabel,\ ylabel1,\ ylabel2,\ ylabel3,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ d1,\ d2,\ d3,\ fsize,\ flegsize,\ filename,\ box$\_$expansion): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Creates\ 3\ vertical\ subplots\ with\ legends\ and\ 1\ x-axis\ label\ at\ the} \\
\mbox{}\ \ \ \textit{\#\ \ \ the\ bottom} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ x1\ =\ x-axis\ data\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ x2\ =\ x-axis\ data\ for\ middle\ plot} \\
\mbox{}\ \ \ \textit{\#\ x3\ =\ x-axis\ data\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ y1\ =\ y-axis\ data\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ y2\ =\ y-axis\ data\ for\ middle\ plot} \\
\mbox{}\ \ \ \textit{\#\ y3\ =\ y-axis\ data\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ xlabel\ =\ x-axis\ label\ (only\ on\ bottom\ plot)} \\
\mbox{}\ \ \ \textit{\#\ ylabel1\ =\ label\ for\ top\ y-axis} \\
\mbox{}\ \ \ \textit{\#\ ylabel2\ =\ label\ for\ middle\ y-axis} \\
\mbox{}\ \ \ \textit{\#\ ylabel3\ =\ label\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ d1\ =\ data\ label\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ d2\ =\ data\ label\ for\ middle\ plot} \\
\mbox{}\ \ \ \textit{\#\ d3\ =\ data\ label\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ fsize\ =\ font\ size\ for\ tick\ labels} \\
\mbox{}\ \ \ \textit{\#\ flegsize\ =\ font\ size\ for\ legend\ labels} \\
\mbox{}\ \ \ \textit{\#\ filename\ =\ name\ of\ file\ for\ plot\ output} \\
\mbox{}\ \ \ \textit{\#\ box$\_$expansion\ =\ expansion\ factor\ on\ legend\ box} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ ax1\ =\ plt.\textbf{subplot}(311);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ plt.\textbf{plot}(x1,y1,\ \texttt{"{}ro-"{}},\ label=d1);\ \ \ \ \ \ \ \textit{\#\ Plot\ the\ first\ data\ set\ with\ a\ red\ line\ wiht\ "{}o"{}\ as\ a\ symbol} \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=6);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height])\ \  \\
\mbox{}\ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ plt.\textbf{xticks}(fontsize=6); \\
\mbox{}\ \ \ plt.\textbf{yticks}(fontsize=6); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Middle\ plot} \\
\mbox{}\ \ \ ax2\ =\ plt.\textbf{subplot}(312); \\
\mbox{}\ \ \ plt.\textbf{plot}(x2,y2,\ \texttt{"{}bo-"{}},\ label=d2); \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ ax2.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax2.\textbf{get$\_$position}(); \\
\mbox{}\ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]); \\
\mbox{}\ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ ax3\ =\ plt.\textbf{subplot}(313); \\
\mbox{}\ \ \ plt.\textbf{plot}(x3,y3,\ \texttt{"{}go-"{}},\ label=d3); \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel3,\ fontsize=fsize); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax3.\textbf{get$\_$position}() \\
\mbox{}\ \ \ ax3.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ leg3\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame3\ =\ leg3.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame3.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg3.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{Two$\_$Chart}(x1,\ y1,\ x2,\ y2,\ xlabel,\ ylabel1,\ ylabel2,\ d1,\ d2,\ fsize,\ flegsize, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ filename,\ box$\_$expansion): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Creates\ 2\ vertical\ subplots\ with\ legends\ and\ 1\ x-axis\ label\ at\ the} \\
\mbox{}\ \ \ \textit{\#\ \ \ the\ bottom} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ x1\ =\ x-axis\ data\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ x2\ =\ x-axis\ data\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ y1\ =\ y-axis\ data\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ y2\ =\ y-axis\ data\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ xlabel\ =\ x-axis\ label\ (only\ on\ bottom\ plot)} \\
\mbox{}\ \ \ \textit{\#\ ylabel1\ =\ label\ for\ top\ y-axis} \\
\mbox{}\ \ \ \textit{\#\ ylabel2\ =\ label\ for\ bottom\ y-axis} \\
\mbox{}\ \ \ \textit{\#\ d1\ =\ data\ label\ for\ top\ plot} \\
\mbox{}\ \ \ \textit{\#\ d2\ =\ data\ label\ for\ bottom\ plot} \\
\mbox{}\ \ \ \textit{\#\ fsize\ =\ font\ size\ for\ tick\ labels} \\
\mbox{}\ \ \ \textit{\#\ flegsize\ =\ font\ size\ for\ legend\ labels} \\
\mbox{}\ \ \ \textit{\#\ filename\ =\ name\ of\ file\ for\ plot\ output} \\
\mbox{}\ \ \ \textit{\#\ box$\_$expansion\ =\ expansion\ factor\ for\ legend} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ ax1\ =\ plt.\textbf{subplot}(211); \\
\mbox{}\ \ \ plt.\textbf{plot}(x1,y1,\ \texttt{"{}ro-"{}},\ label=d1); \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize); \\
\mbox{}\ \ \ ax1.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Bottom\ Plot} \\
\mbox{}\ \ \ ax2\ =\ plt.\textbf{subplot}(212); \\
\mbox{}\ \ \ plt.\textbf{plot}(x2,y2,\ \texttt{"{}go-"{}},\ label=d2); \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(fsize); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{One$\_$Chart}(x,\ y,\ xlabel,\ ylabel,\ d,\ fsize,\ flegsize,\ filename,\ box$\_$expansion): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Creates\ 1\ chart\ with\ a\ legend\ and\ 1\ x-axis\ label} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ x\ =\ x-axis\ data} \\
\mbox{}\ \ \ \textit{\#\ y\ =\ y-axis\ data} \\
\mbox{}\ \ \ \textit{\#\ xlabel\ =\ x-axis\ label} \\
\mbox{}\ \ \ \textit{\#\ ylabel1\ =\ label\ for\ y-axis} \\
\mbox{}\ \ \ \textit{\#\ d\ =\ data\ label} \\
\mbox{}\ \ \ \textit{\#\ fsize\ =\ Font\ size\ for\ tick\ marks\ and\ labels} \\
\mbox{}\ \ \ \textit{\#\ flegsize\ =\ Legend\ font\ size} \\
\mbox{}\ \ \ \textit{\#\ filename\ =\ name\ of\ file\ for\ plot\ output} \\
\mbox{}\ \ \ \textit{\#\ box$\_$expansion\ =\ expansion\ factor\ for\ legend} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ ax1\ =\ plt.\textbf{subplot}(111); \\
\mbox{}\ \ \ plt.\textbf{plot}(x,y,\ \texttt{"{}go-"{}},\ label=d); \\
\mbox{}\ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ plt.\textbf{ylabel}(ylabel,\ fontsize=fsize); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ frame\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ frame.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot1}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ user$\_$list,\ system$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ nice$\_$list,\ fsize,\ item): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 1:\ Various\ CPU\ percentages\ (user,\ system,\ nice)\ vs.\ time\ (3\ subplots)} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ (CPU\ Utilization)\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ (CPU\ Utilization)\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ plots\ three\ types\ of\ CPU\ Utilization:\ (1)\ User,\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}(2)\ System,\ and\ (3)\ Nice.\ The\ User\ utilization\ is\ the\ \ percentage\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}of\ CPU\ utilization\ that\ occurred\ while\ executing\ at\ the\ user\ level\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}(applications).The\ System\ utilization\ is\ the\ percentage\ of\ CPU\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}utilization\ that\ occurred\ while\ executing\ at\ the\ system\ level\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}(kernel).\ The\ third\ time\ is\ the\ Nice\ utilization\ which\ is\ the\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}percentage\ of\ CPU\ utilization\ that\ occurred\ while\ executing\ at\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ \ user\ \ level\ with\ nice\ priority.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}\%\ Uso\ CPU\textbackslash{}n\ por\ procesos\ de\ User"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}\%\ Uso\ CPU\ \textbackslash{}n\ por\ procesos\ de\ System"{}}; \\
\mbox{}\ \ \ ylabel3\ =\ \texttt{"{}\%\ Uso\ CPU\ \textbackslash{}n\ por\ procesos\ Nice"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}User"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}System"{}}; \\
\mbox{}\ \ \ d3\ =\ \texttt{"{}Nice"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/percentage$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ box$\_$expansion\ =\ 0.95;\ \ \ \textit{\#\ Default} \\
\mbox{}\ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{Three$\_$Chart}(x$\_$seconds,\ user$\_$list,\ x$\_$seconds,\ system$\_$list,\ x$\_$seconds,\ nice$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xlabel,\ ylabel1,\ ylabel2,\ ylabel3,\ d1,\ d2,\ d3,\ fsize,\ flegsize, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename,\ box$\_$expansion); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:\ (Figure\ html)} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}percentage$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Utilization\ (User,\ System,\ and\ Nice)\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Utilization\ (User,\ System,\ and\ Nice)\ for\ device\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot2}(iloop,\ iplot,\ \ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ iowait$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 2:\ iowait\ percentage\ time} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}iowait$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}IOWait\ Percentage\ Time\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}(combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}IOWait\ Percentage\ Time\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ is\ the\ percentage\ of\ time\ that\ the\ CPU\ or\ CPUs\ were\ idle\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}during\ which\ the\ system\ had\ an\ outstanding\ disk\ device\ I/O\ request.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel\ =\ \texttt{"{}\%\ IOwait\ Porcentaje\ de\ tiempo\ CPU\ \textbackslash{}n\ esperando\ peticiones\ E/S"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d\ =\ \texttt{"{}IOwait"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/iowait$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ box$\_$expansion\ =\ 0.96; \\
\mbox{}\ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{One$\_$Chart}(x$\_$seconds,\ iowait$\_$list,\ xlabel,\ ylabel,\ d,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}iowait$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ waiting\ to\ process\ disk\ requests\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ waiting\ to\ process\ disk\ requests\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot3}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ steal$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 3:\ Steal\ Time} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}steal$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Steal\ Percentage\ Time\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Steal\ Percentage\ Time\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ is\ the\ percentage\ of\ time\ spent\ in\ involuntary\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}wait\ by\ the\ virtual\ CPU\ or\ CPUs\ while\ the\ hypervisor\ was\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}servicing\ another\ virtual\ processor.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel\ =\ \texttt{"{}\%\ Steal\ Porcentaje\ de\ tiempo\ CPU\ \textbackslash{}n\ esperando\ peticiones\ E/S"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d\ =\ \texttt{"{}Steal"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/steal$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ box$\_$expansion\ =\ 0.96; \\
\mbox{}\ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{One$\_$Chart}(x$\_$seconds,\ steal$\_$list,\ xlabel,\ ylabel,\ d,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}steal$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ in\ involuntary\ waiting\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ in\ involuntary\ waiting\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot4}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ idle$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 4:\ Idle\ Time} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}idle$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Idle\ Percentage\ Time\ with\ no\ IO\ requests\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}(combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Idle\ Percentage\ Time\ with\ no\ IO\ requests\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ is\ the\ percentage\ of\ time\ that\ the\ CPU\ or\ CPUs\ were\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}idle\ and\ the\ system\ did\ not\ have\ an\ outstanding\ disk\ I/O\ request.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel\ =\ \texttt{"{}\%\ Idle\ Porcentaje\ de\ tiempo\ CPU\ \textbackslash{}n\ esperando\ peticiones\ E/S"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d\ =\ \texttt{"{}Idle"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/idle$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ box$\_$expansion\ =\ 0.97; \\
\mbox{}\ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \textbf{if}\ (\textbf{len}(d)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ \textbf{len}(d); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{One$\_$Chart}(x$\_$seconds,\ idle$\_$list,\ xlabel,\ ylabel,\ d,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}idle$\_$percentage$\_$cpu$\_$time"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ in\ idle\ activities\ with\ no\ IO\ requests\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ in\ idle\ activities\ with\ no\ IO\ requests\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\textit{\#\ end\ if} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot5}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 5:\ Read\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}rmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ two\ parts.\ The\ top\ graph\ plots\ the\ Read\ Rate\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}in\ MB/s\ versus\ time\ and\ the\ bottom\ graph\ plots\ the\ Total\ CPU\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Utilization\ percentage\ (User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Throughput\ de\ lectura\ (MB/s)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Porcentaje\ de\ utilización\ total\ de\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Throughput\ de\ lectura"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Utilización\ de\ CPU"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/read$\_$throughput"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.87;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Two$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}rMB"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list,\ xlabel,\ ylabel1,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ylabel2,\ d1,\ d2,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ expansion$\_$box\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.88;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(211); \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}rMB"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}(); \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]); \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ Plot} \\
\mbox{}\ \ \ \ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ \ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(212); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d2); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.0,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}read$\_$throughput"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Throughput\ (MB/s)\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Throughput\ (MB/s)\ and\ Total\ CPU\ Utilization\ Percentage\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ if} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot6}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 6:\ Write\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}wmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Write\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Write\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ two\ parts.\ The\ top\ graph\ plots\ the\ Write\ Rate\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}in\ MB/s\ versus\ time\ and\ the\ bottom\ graph\ plots\ the\ Total\ CPU\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Utilization\ percentage\ (User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Throughput\ de\ escritura(MB/s)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Porcentaje\ de\ utilización\ total\ de\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Time\ (seconds)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Throughput\ de\ escritura"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Utilización\ de\ CPU"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/write$\_$throughput"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.82;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Two$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}wMB"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list,\ xlabel,\ ylabel1,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ylabel2,\ d1,\ d2,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.88;\ \ \ \textit{\#\ Default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(211); \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}wMB"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}(); \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ Plot} \\
\mbox{}\ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(212); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d2); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}write$\_$throughput"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Write\ Throughput\ (MB/s)\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Write\ Throughput\ (MB/s)\ and\ Total\ CPU\ Utilization\ Percentage\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot7}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 7:\ Read\ Request\ complete\ rate,\ Write\ Request\ complete\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$complete$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Complete,\ Write\ Requests\ Complete,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$complete$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Complete,\ Write\ Requests\ Complete,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ three\ parts.\ The\ top\ graph\ plots\ the\ number\ (after\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}merges)\ of\ read\ requests\ completed\ per\ second\ for\ the\ device\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}versus\ time.\ The\ middle\ graph\ plots\ the\ number\ (after\ merges)\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}of\ write\ requests\ completed\ per\ second\ for\ the\ device\ versus\ time.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}The\ bottom\ graph\ plots\ the\ Total\ CPU\ Utilization\ percentage\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}(User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Tasa\ de\ peticiones\ \textbackslash{}n\ de\ lectura\ (peticiones/s)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Tasa\ de\ peticiones\ \textbackslash{}n\ de\ escritura\ (peticiones/s)"{}}; \\
\mbox{}\ \ \ ylabel3\ =\ \texttt{"{}Porcentaje\ \textbackslash{}n\ total\ de\ \textbackslash{}n\ uso\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Pets.\ lectura\ completas"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Pets\ escrituras\ completas"{}}; \\
\mbox{}\ \ \ d3\ =\ \texttt{"{}Utilización\ de\ CPU"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/read$\_$write$\_$requests$\_$complete$\_$rate"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Three$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}r"{}}],\ x$\_$seconds,\ item[\texttt{"{}w"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list,\ xlabel,\ ylabel1,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ylabel2,\ ylabel3,\ d1,\ d2,\ d3,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d33\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d3; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d33)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d33); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ plot:} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(311);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}r"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Middle\ Plot:} \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(312); \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}w"{}}],\ marker,\ label=d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend:} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ \ \ \ ax3\ =\ plt.\textbf{subplot}(313); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d3); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel3,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax3.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax3.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg3\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame3\ =\ leg3.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame3.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg3.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}read$\_$write$\_$requests$\_$complete$\_$rate"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Requests\ Completed\ Rate\ (requests/s),\ Write\ Requests\ Completed\ Rate\ (requests/s),\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Requests\ Completed\ Rate\ (requests/s),\ Write\ Requests\ Completed\ Rate\ (requests/s),\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot8}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 8:\ Read\ Request\ merge\ rate,\ Write\ Request\ merge\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}requests$\_$merged$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}}\ \ \  \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Merged\ rate,\ Write\ Requests\ Merged\ rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}}\ \ \  \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Merged\ rate,\ Write\ Requests\ Merged\ rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ three\ parts.\ The\ top\ graph\ plots\ the\ number\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}of\ read\ requests\ merged\ per\ second\ that\ were\ queued\ to\ the\ device.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}The\ middle\ graph\ plots\ the\ number\ of\ write\ requests\ merged\ per\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}second\ that\ were\ queued\ to\ the\ device.\ The\ bottom\ graph\ plots\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ Total\ CPU\ Utilization\ percentage\ (User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Tasa\ de\ mezcla\ de\ \textbackslash{}n\ peticiones\ de\ lectura\ \textbackslash{}n\ (peticiones/s)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Tasa\ de\ mezcla\ de\ \textbackslash{}n\ peticiones\ de\ escritura\ \textbackslash{}n\ (peticiones/s)"{}}; \\
\mbox{}\ \ \ ylabel3\ =\ \texttt{"{}Porcentaje\ de\ utilización\ total\ de\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Merge\ de\ pets\ lectura"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Merge\ de\ pets\ escritura"{}}; \\
\mbox{}\ \ \ d3\ =\ \texttt{"{}Total\ CPU\ Utilization"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/read$\_$write$\_$requests$\_$merged$\_$rate"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Three$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}rrqm"{}}],\ x$\_$seconds,\ item[\texttt{"{}wrqm"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xlabel,\ ylabel1,\ ylabel2,\ ylabel3,\ d1,\ d2,\ d3,\ fsize,\ flegsize, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ 0.87;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d33\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d3; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d33)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d33); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ Plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(311);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}rrqm"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Middle\ plot} \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(312); \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}wrqm"{}}],\ marker,\ label=d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend:} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ \ \ \ ax3\ =\ plt.\textbf{subplot}(313); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d3); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel3,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax3.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax3.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg3\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame3\ =\ leg3.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame3.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg3.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}read$\_$write$\_$requests$\_$merged$\_$rate"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Requests\ Merged\ Rate\ (requests/s),\ Write\ Requests\ Merged\ Rate\ (requests/s),\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Read\ Requests\ Merged\ Rate\ (requests/s),\ Write\ Requests\ Merged\ Rate\ (requests/s),\ and\ Total\ CPU\ Utilization\ Percentage\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 9:\ Avg.\ Request\ Size,\ Avg.\ Queue\ Length,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}requests$\_$queue$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Size,\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Size,\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ three\ parts.\ The\ top\ graph\ plots\ the\ average\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}size\ (in\ sectors)\ of\ the\ requests\ that\ were\ issued\ to\ the\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}device.\ The\ middle\ graph\ plots\ the\ average\ queue\ length\ of\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ requests\ that\ were\ issued\ to\ the\ device.\ The\ bottom\ graph\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}plots\ the\ Total\ CPU\ Utilization\ percentage\ (User\ Time\ +\ System\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Tamaño\ medio\ \textbackslash{}n\ de\ peticiones\ E/S\ \textbackslash{}n\ (KB)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Tamaño\ medio\ de\ \textbackslash{}n\ cola\ de\ peticiones\ \textbackslash{}n\ (peticiones)"{}}; \\
\mbox{}\ \ \ ylabel3\ =\ \texttt{"{}Porcentaje\ de\ \textbackslash{}n\ utilización\ total\ \textbackslash{}n\ de\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Tamaño\ medio\ de\ pets"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Tamaño\ medio\ de\ cola"{}}; \\
\mbox{}\ \ \ d3\ =\ \texttt{"{}Utilización\ total\ de\ CPU"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/requests$\_$queue$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Three$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}avgrqsz"{}}],\ x$\_$seconds,\ item[\texttt{"{}avgqusz"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xlabel,\ ylabel1,\ ylabel2,\ ylabel3,\ d1,\ d2,\ d3,\ fsize,\ flegsize,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.87;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d33\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d3; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d33)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d33); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(311);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}avgrqsz"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Middle\ plot} \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(312); \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}avgqusz"{}}],\ marker,\ label=d22); \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend:} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ \ \ \ ax3\ =\ plt.\textbf{subplot}(313); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d3); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel3,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax3.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax3.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg3\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame3\ =\ leg3.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame3.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg3.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}requests$\_$queue$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Request\ Size\ (sectors),\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\ Percentage\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Request\ Size\ (sectors),\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\ Percentage\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot10v10}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 10:\ Average\ Wait\ Times\ for\ read,\ write\ requests} \\
\mbox{}\ \ \ \textit{\#\ (for\ V10\ format\ of\ sysstat)} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}avg$\_$wait$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Read\ Request\ Time\ (ms),\ Average\ Write\ Request\ Time\ (ms),\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Read\ Request\ Time\ (ms),\ Average\ Write\ Request\ Time\ (ms),\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ three\ parts.\ The\ top\ graph\ plots\ the\ average\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}time\ (in\ milliseconds)\ for\ read\ requests\ issued\ to\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ device\ to\ be\ served.\ This\ includes\ the\ time\ spent\ by\ the\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}requests\ in\ queue\ and\ the\ time\ spent\ servicing\ them.\ The\ middle\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}graph\ plots\ the\ average\ time\ (in\ milliseconds)\ for\ write\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}requests\ issued\ to\ the\ device\ to\ be\ \ served.\ This\ includes\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ time\ spent\ by\ the\ requests\ in\ queue\ and\ the\ time\ spent\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}servicing\ them.\ The\ bottom\ graph\ plots\ the\ Total\ CPU\ Utilization\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}percentage\ (User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Media\ de\ peticiones\ de\ lectura\ \textbackslash{}n\ Tiempo\ (ms)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Media\ de\ peticiones\ de\ escritura\ \textbackslash{}n\ Tiempo\ (ms)"{}}; \\
\mbox{}\ \ \ ylabel3\ =\ \texttt{"{}Porcentaje\ de\ \textbackslash{}n\ utilización\ total\ \textbackslash{}n\ de\ CPU"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Tiempo\ (segundos)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Media\ pet.\ lectura"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Media\ pet.\ escritura"{}}; \\
\mbox{}\ \ \ d3\ =\ \texttt{"{}Porcentaje\ uso\ CPU"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/avg$\_$request$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Three$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}r$\_$await"{}}],\ x$\_$seconds,\ item[\texttt{"{}w$\_$await"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ xlabel,\ ylabel1,\ ylabel2,\ ylabel3,\ d1,\ d2,\ d3,\ fsize,\ flegsize,\ filename, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d3)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d3); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d33\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d3; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d33)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d33); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ Plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(311);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}r$\_$await"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Middle\ plot} \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(312); \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}w$\_$await"{}}],\ marker,\ label=d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax2.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend:} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ \ \ \ ax3\ =\ plt.\textbf{subplot}(313); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d3); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel3,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax3.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax3.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg3\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame3\ =\ leg3.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame3.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg3.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}avg$\_$request$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Read\ Request\ Time\ (ms),\ Average\ Write\ Request\ Time\ (ms),\ and\ Total\ CPU\ Utilization\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Read\ Request\ Time\ (ms),\ Average\ Write\ Request\ Time\ (ms),\ and\ Total\ CPU\ Utilization\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot10v9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 10:\ Average\ Wait\ Times\ for\ requests\ and\ total\ CPU\ time} \\
\mbox{}\ \ \ \textit{\#\ (for\ V10\ format\ of\ sysstat)} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}avg$\_$wait$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Time\ (ms)\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Time\ (ms)\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ two\ parts.\ The\ top\ graph\ plots\ the\ average\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}time\ (in\ milliseconds)\ for\ requests\ issued\ to\ the\ device\ to\textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}be\ served.\ This\ includes\ the\ time\ spent\ by\ the\ requests\ in\ queue\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}and\ the\ time\ spent\ servicing\ them.\ The\ bottom\ graph\ plots\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}the\ Total\ CPU\ Utilization\ percentage\ (User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}Average\ Request\ \textbackslash{}n\ Time\ (ms)"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Total\ CPU\ \textbackslash{}n\ Percentage\ \textbackslash{}n\ Utilization"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Time\ (seconds)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Avg.\ Req\ Time"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Total\ CPU\ Utilization"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/avg$\_$request$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Two$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}await"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list,\ xlabel,\ ylabel1,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ylabel2,\ d1,\ d2,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.86;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ Plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(211);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Define\ top\ plot\ using\ subplot\ function} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}await"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}});\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Don't\ put\ an\ x-axis\ label\ since\ it's\ the\ top\ plot} \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize);\ \ \ \ \textit{\#\ Use\ a\ 10\ pt\ font\ for\ y-axis\ label} \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]);\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ get\ x-axis\ tick\ label} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}});\ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Make\ legend\ box\ have\ a\ gray\ background} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize);\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ Change\ the\ font\ size\ of\ the\ legend\ text\ to\ 10\ pt.} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ plot} \\
\mbox{}\ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(212); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d2); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ expansion$\_$box,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{yticks}(fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Either\ save\ the\ plot\ to\ a\ file\ or\ display\ it\ to\ the\ screen} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}avg$\_$request$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Request\ Time\ (ms)\ and\ Total\ CPU\ Utilization\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Average\ Request\ Time\ (ms)\ and\ Total\ CPU\ Utilization\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ def} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textbf{def}\ \textbf{plot11}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list): \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Figure\ 11:\ Percentage\ CPU\ Util} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H4\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}.\ Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H4\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\ \textbackslash{}n"{}} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}.\ \textless{}a\ id=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ figure\ has\ two\ parts.\ The\ top\ graph\ plots\ the\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}percentage\ of\ CPU\ time\ during\ which\ I/O\ requests\ were\ issued\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}to\ the\ device\ (bandwidth\ utilization\ for\ the\ device).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Device\ saturation\ occurs\ when\ this\ value\ is\ close\ to\ 100\%.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}The\ bottom\ graph\ plots\ the\ Total\ CPU\ Utilization\ percentage\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}(User\ Time\ +\ System\ Time).\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ make\ the\ plot} \\
\mbox{}\ \ \ ylabel1\ =\ \texttt{"{}\%\ CPU\ time\ for\ IO\ \textbackslash{}n\ Requests"{}}; \\
\mbox{}\ \ \ ylabel2\ =\ \texttt{"{}Total\ CPU\ \textbackslash{}n\ Percentage\ \textbackslash{}n\ Utilization"{}}; \\
\mbox{}\ \ \ xlabel\ =\ \texttt{"{}Time\ (seconds)"{}}; \\
\mbox{}\ \ \ d1\ =\ \texttt{"{}Util"{}}; \\
\mbox{}\ \ \ d2\ =\ \texttt{"{}Total\ CPU\ Utilization"{}}; \\
\mbox{}\ \ \ filename\ =\ dirname\ +\ \texttt{"{}/util$\_$cpu$\_$total$\_$cp"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ flegsize\ =\ 6; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.82;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{Two$\_$Chart}(x$\_$seconds,\ item[\texttt{"{}util"{}}],\ x$\_$seconds,\ time$\_$sum$\_$list,\ xlabel,\ ylabel1,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ylabel2,\ d1,\ d2,\ fsize,\ flegsize,\ filename,\ box$\_$expansion); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ jloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Compute\ box$\_$expansion\ factor:} \\
\mbox{}\ \ \ \ \ \ box$\_$expansion\ =\ 0.90;\ \ \ \textit{\#\ default} \\
\mbox{}\ \ \ \ \ \ ilongest\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d1)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d1); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d11)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d2)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d2); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ d22\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d2; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(d22)\ \textgreater{}\ ilongest): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ ilongest\ =\ \textbf{len}(d22); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ -0.0082702674*ilongest\ +\ 1.0538027948;\ \ \ \textit{\#\ Curve\ fit\ of\ \#\ chars\ vs.\ expansion\ box} \\
\mbox{}\ \ \ \ \ \ expansion$\_$box\ =\ \textbf{round}(junk1,2); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Top\ plot} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ jloop\ =\ jloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ marker\ =\ line$\_$list[jloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1\ =\ plt.\textbf{subplot}(211); \\
\mbox{}\ \ \ \ \ \ \ \ \ d11\ =\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ "{}}\ +\ d1; \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ item[\texttt{"{}util"{}}],\ marker,\ label=d11); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{xlabel}(\texttt{"{}\ "{}}); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{ylabel}(ylabel1,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \ \ \ \ ax1.\textbf{set$\_$xticklabels}([]); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax1.\textbf{get$\_$position}(); \\
\mbox{}\ \ \ \ \ \ ax1.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg1\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame1\ =\ leg1.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame1.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg1.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Bottom\ Plot} \\
\mbox{}\ \ \ \ \ \ ax2\ =\ plt.\textbf{subplot}(212); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{plot}(x$\_$seconds,\ time$\_$sum$\_$list,\ \texttt{"{}go-"{}},\ label=d2); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{grid}(); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{xlabel}(xlabel); \\
\mbox{}\ \ \ \ \ \ plt.\textbf{ylabel}(ylabel2,\ fontsize=fsize); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Legend} \\
\mbox{}\ \ \ \ \ \ box\ =\ ax2.\textbf{get$\_$position}() \\
\mbox{}\ \ \ \ \ \ ax2.\textbf{set$\_$position}([box.x0,\ box.y0,\ box.width\ *\ box$\_$expansion,\ box.height]) \\
\mbox{}\ \ \ \ \ \ leg2\ =\ plt.\textbf{legend}(bbox$\_$to$\_$anchor=(1.01,\ 1),\ loc=2,\ borderaxespad=0.,\ labelspacing=0,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ borderpad=0.15,\ handletextpad=0.2); \\
\mbox{}\ \ \ \ \ \ frame2\ =\ leg2.\textbf{get$\_$frame}(); \\
\mbox{}\ \ \ \ \ \ frame2.\textbf{set$\_$facecolor}(\texttt{"{}0.80"{}}); \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ t\ \textbf{in}\ leg2.\textbf{get$\_$texts}(): \\
\mbox{}\ \ \ \ \ \ \ \ \ t.\textbf{set$\_$fontsize}(flegsize); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(filename)\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{show}(); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{savefig}(filename); \\
\mbox{}\ \ \ \ \ \ \ \ \ plt.\textbf{close}(); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Output:} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}center\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cp"{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}.png"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}img\ src=\textbackslash{}"{}"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\ for\ device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\textless{}strong\textgreater{}Figure\ "{}}\ +\ \textbf{str}(iplot)\ +\ \texttt{"{}\ -\ Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\ \textless{}/strong\textgreater{}\textless{}/center\textgreater{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\textit{\#\ end\ if} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{} \\
\mbox{}\textit{\#\ ===================} \\
\mbox{}\textit{\#\ Main\ Python\ section} \\
\mbox{}\textit{\#\ ===================} \\
\mbox{} \\
\mbox{}\textbf{if}\ $\_$$\_$name$\_$$\_$\ ==\ \texttt{'$\_$$\_$main$\_$$\_$'}: \\
\mbox{} \\
\mbox{}\ \ \ \textit{\#\ Get\ the\ command\ line\ inputs} \\
\mbox{}\ \ \ input$\_$options\ =\ sys.argv; \\
\mbox{}\ \ \ combined$\_$plots\ =\ 0; \\
\mbox{}\ \ \ help$\_$flag\ =\ 0; \\
\mbox{}\ \ \ \textbf{for}\ item\ \textbf{in}\ input$\_$options: \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (item\ ==\ \texttt{"{}-c"{}}): \\
\mbox{}\ \ \ \ \ \ \ \ \ combined$\_$plots\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{elif}\ (item\ ==\ \texttt{"{}-h"{}}): \\
\mbox{}\ \ \ \ \ \ \ \ \ help$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ input$\_$filename\ =\ input$\_$options[-1]; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{if}\ (help$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \textbf{help$\_$out}(); \\
\mbox{}\ \ \ \ \ \ sys.\textbf{exit}(); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}combined$\_$plots\ =\ "{}},combined$\_$plots; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}iostat\ plotting\ script"{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}input\ filename:\ "{}},input$\_$filename; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Initialize\ lists\ that\ will\ store\ data} \\
\mbox{}\ \ \ user$\_$list\ =\ []; \\
\mbox{}\ \ \ nice$\_$list\ =\ []; \\
\mbox{}\ \ \ system$\_$list\ =\ []; \\
\mbox{}\ \ \ iowait$\_$list\ =\ []; \\
\mbox{}\ \ \ steal$\_$list\ =\ []; \\
\mbox{}\ \ \ idle$\_$list\ =\ []; \\
\mbox{}\ \ \ date$\_$list\ =\ []; \\
\mbox{}\ \ \ time$\_$list\ =\ []; \\
\mbox{}\ \ \ meridian$\_$list\ =\ []; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Initialize\ variables} \\
\mbox{}\ \ \ fsize\ =\ 8; \\
\mbox{}\ \ \ vflag\ =\ 0; \\
\mbox{}\ \ \ first$\_$flag\ =\ 0; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Master\ dictionary\ of\ device\ data} \\
\mbox{}\ \ \ device$\_$data$\_$list\ =\ []; \\
\mbox{}\ \ \ \textit{\#\ Systat\ V\ 10\ List\ element\ is\ dictionary:} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}device"{}\}\ =\ "{}device\ name"{}} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}rrqm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}wrqm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}r"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}w"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}rMB"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}wMB"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}avgrqsz"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}avgqusz"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}await"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}r$\_$await"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}w$\_$await"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}svctm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}util"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ Systat\ V\ 9\ List\ element\ is\ dictionary:} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}device"{}\}\ =\ "{}device\ name"{}} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}rrqm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}wrqm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}r"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}w"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}rMB"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}wMB"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}avgrqsz"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}avgqusz"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}await"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}svctm"{}\}\ =\ [];} \\
\mbox{}\ \ \ \textit{\#\ \ \ local$\_$dict\{"{}util"{}\}\ =\ [];} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ flags\ for\ controlling\ flow} \\
\mbox{}\ \ \ info$\_$flag\ =\ 1;\ \ \ \ \ \ \ \textit{\#\ 0\ =\ don't\ gather\ system\ data,\ 1\ =\ gather\ system\ data} \\
\mbox{}\ \ \ cpu$\_$flag\ =\ -1;\ \ \ \ \ \ \ \textit{\#\ -1\ =\ don't\ do\ anything,\ 0\ =\ store\ CPU\ header\ info\ (only\ done\ once),\ 1\ =\ Store\ CPU\ info} \\
\mbox{}\ \ \ device$\_$flag\ =\ -1;\ \ \ \ \textit{\#\ -1\ =\ store\ Device\ header\ info\ (only\ done\ once),\ 1\ =\ store\ values,\ 2\ =\ done} \\
\mbox{}\ \ \ data$\_$flag\ =\ 0;\ \ \ \ \ \ \ \textit{\#\ -1\ =\ cpu,\ 1\ =\ device\ (which\ set\ of\ data\ is\ being\ gathered)} \\
\mbox{}\ \ \ time$\_$flag\ =\ -1;\ \ \ \ \ \ \textit{\#\ -1\ =\ don't\ read\ start\ time\ information,\ 1\ =\ read\ start\ time\ information} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ loop\ over\ lines\ in\ input\ file} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}\ "{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}reading\ iostat\ output\ file\ ...\ "{}}; \\
\mbox{}\ \ \ icount\ =\ 0; \\
\mbox{}\ \ \ \textbf{for}\ line\ \textbf{in}\ \textbf{open}(input$\_$filename,\texttt{'r'}).\textbf{readlines}(): \\
\mbox{}\ \ \ \ \ \ currentline\ =\ shlex.\textbf{split}(line); \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (\textbf{len}(currentline)\ \textgreater{}\ 0):\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (device$\_$flag\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ Read\ device\ header"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ device$\_$labels\ =\ [];\ \ \ \ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ device$\_$labels\ =\ currentline; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ device$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (device$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ Read\ device\ data"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ local$\_$device\ =\ currentline[0]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ local$\_$device\ =\ "{},local$\_$device} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(device$\_$data$\_$list)\ \textgreater{}\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifind\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{for}\ iloop\ \textbf{in}\ \textbf{range}(0,\ \textbf{len}(device$\_$data$\_$list)\ ): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ item\ =\ device$\_$data$\_$list[iloop]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#for\ item\ in\ device$\_$data$\_$list:} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (item[\texttt{"{}device"{}}]\ ==\ local$\_$device): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ \ \ \ adding\ data\ to\ existing\ device:\ "{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}rrqm"{}}].\textbf{append}(\textbf{float}(currentline[1])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}wrqm"{}}].\textbf{append}(\textbf{float}(currentline[2])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}r"{}}].\textbf{append}(\textbf{float}(currentline[3])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}w"{}}].\textbf{append}(\textbf{float}(currentline[4])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}rMB"{}}].\textbf{append}(\textbf{float}(currentline[5])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}wMB"{}}].\textbf{append}(\textbf{float}(currentline[6])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}avgrqsz"{}}].\textbf{append}(\textbf{float}(currentline[7])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}avgqusz"{}}].\textbf{append}(\textbf{float}(currentline[8])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}await"{}}].\textbf{append}(\textbf{float}(currentline[9])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}svctm"{}}].\textbf{append}(\textbf{float}(currentline[10])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}util"{}}].\textbf{append}(\textbf{float}(currentline[11]));\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}rrqm"{}}].\textbf{append}(\textbf{float}(currentline[1])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}wrqm"{}}].\textbf{append}(\textbf{float}(currentline[2])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}r"{}}].\textbf{append}(\textbf{float}(currentline[3])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}w"{}}].\textbf{append}(\textbf{float}(currentline[4])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}rMB"{}}].\textbf{append}(\textbf{float}(currentline[5])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}wMB"{}}].\textbf{append}(\textbf{float}(currentline[6])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}avgrqsz"{}}].\textbf{append}(\textbf{float}(currentline[7])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}avgqusz"{}}].\textbf{append}(\textbf{float}(currentline[8])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}await"{}}].\textbf{append}(\textbf{float}(currentline[9])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}r$\_$await"{}}].\textbf{append}(\textbf{float}(currentline[10])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}w$\_$await"{}}].\textbf{append}(\textbf{float}(currentline[11])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}svctm"{}}].\textbf{append}(\textbf{float}(currentline[12])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list[iloop][\texttt{"{}util"{}}].\textbf{append}(\textbf{float}(currentline[13])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#end\ if\ \ \ \ \ \ \ \ \ \ \ } \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ifind\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (ifind\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ \ \ \ creating\ new\ device\ ifind\ ==\ 0"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (first$\_$flag\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(currentline)\ ==\ 12): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vflag\ =\ 9; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Using\ Version\ 9\ format\ of\ sysstat\ tools"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{elif}\ (\textbf{len}(currentline)\ ==\ 14): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vflag\ =\ 10; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Using\ Version\ 10\ format\ of\ sysstat\ tools"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Error:\ each\ line\ has\ "{}},\textbf{len}(currentline),\texttt{"{}\ elements"{}} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}This\ code\ is\ designed\ for\ 12\ elemenets\ for\ sysstat\ V9"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}or\ 14\ elements\ for\ sysstat\ V10"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Stopping"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sys.\textbf{exit}(); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}device"{}}]\ =\ local$\_$device; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rrqm"{}}]=[\textbf{float}(currentline[1])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wrqm"{}}]=[\textbf{float}(currentline[2])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r"{}}]=[\textbf{float}(currentline[3])];\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w"{}}]=[\textbf{float}(currentline[4])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rMB"{}}]=[\textbf{float}(currentline[5])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wMB"{}}]=[\textbf{float}(currentline[6])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgrqsz"{}}]=[\textbf{float}(currentline[7])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgqusz"{}}]=[\textbf{float}(currentline[8])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}await"{}}]=[\textbf{float}(currentline[9])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}svctm"{}}]=[\textbf{float}(currentline[10])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}util"{}}]=[\textbf{float}(currentline[11])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ local$\_$dict\ =\ "{},local$\_$dict} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list.\textbf{append}(local$\_$dict); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}device"{}}]\ =\ local$\_$device; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rrqm"{}}]=[\textbf{float}(currentline[1])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wrqm"{}}]=[\textbf{float}(currentline[2])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r"{}}]=[\textbf{float}(currentline[3])];\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w"{}}]=[\textbf{float}(currentline[4])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rMB"{}}]=[\textbf{float}(currentline[5])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wMB"{}}]=[\textbf{float}(currentline[6])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgrqsz"{}}]=[\textbf{float}(currentline[7])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgqusz"{}}]=[\textbf{float}(currentline[8])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}await"{}}]=[\textbf{float}(currentline[9])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r$\_$await"{}}]=[\textbf{float}(currentline[10])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w$\_$await"{}}]=[\textbf{float}(currentline[11])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}svctm"{}}]=[\textbf{float}(currentline[12])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}util"{}}]=[\textbf{float}(currentline[13])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ local$\_$dict\ =\ "{},local$\_$dict} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list.\textbf{append}(local$\_$dict); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ \ \ \ creating\ new\ device\ else"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (first$\_$flag\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (\textbf{len}(currentline)\ ==\ 12): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vflag\ =\ 9; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Using\ Version\ 9\ format\ of\ sysstat\ tools"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{elif}\ (\textbf{len}(currentline)\ ==\ 14): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ vflag\ =\ 10; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Using\ Version\ 10\ format\ of\ sysstat\ tools"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Error:\ each\ line\ has\ "{}},\textbf{len}(currentline),\texttt{"{}\ elements"{}} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}This\ code\ is\ designed\ for\ 12\ elemenets\ for\ sysstat\ V9"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}or\ 14\ elements\ for\ sysstat\ V10"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Stopping"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sys.\textbf{exit}(); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}device"{}}]\ =\ local$\_$device; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rrqm"{}}]=[\textbf{float}(currentline[1])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wrqm"{}}]=[\textbf{float}(currentline[2])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r"{}}]=[\textbf{float}(currentline[3])];\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w"{}}]=[\textbf{float}(currentline[4])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rMB"{}}]=[\textbf{float}(currentline[5])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wMB"{}}]=[\textbf{float}(currentline[6])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgrqsz"{}}]=[\textbf{float}(currentline[7])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgqusz"{}}]=[\textbf{float}(currentline[8])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}await"{}}]=[\textbf{float}(currentline[9])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}svctm"{}}]=[\textbf{float}(currentline[10])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}util"{}}]=[\textbf{float}(currentline[11])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list.\textbf{append}(local$\_$dict); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}device"{}}]\ =\ local$\_$device; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rrqm"{}}]=[\textbf{float}(currentline[1])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wrqm"{}}]=[\textbf{float}(currentline[2])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r"{}}]=[\textbf{float}(currentline[3])];\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w"{}}]=[\textbf{float}(currentline[4])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}rMB"{}}]=[\textbf{float}(currentline[5])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}wMB"{}}]=[\textbf{float}(currentline[6])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgrqsz"{}}]=[\textbf{float}(currentline[7])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}avgqusz"{}}]=[\textbf{float}(currentline[8])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}await"{}}]=[\textbf{float}(currentline[9])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}r$\_$await"{}}]=[\textbf{float}(currentline[10])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}w$\_$await"{}}]=[\textbf{float}(currentline[11])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}svctm"{}}]=[\textbf{float}(currentline[12])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ local$\_$dict[\texttt{"{}util"{}}]=[\textbf{float}(currentline[13])]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ device$\_$data$\_$list.\textbf{append}(local$\_$dict); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ local$\_$dict\ =\ "{},local$\_$dict} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (cpu$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ Reading\ and\ Storing\ CPU\ values"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ user$\_$list.\textbf{append}(\textbf{float}(currentline[0])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ nice$\_$list.\textbf{append}(\textbf{float}(currentline[1])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$list.\textbf{append}(\textbf{float}(currentline[2])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ iowait$\_$list.\textbf{append}(\textbf{float}(currentline[3])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ steal$\_$list.\textbf{append}(\textbf{float}(currentline[4])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ idle$\_$list.\textbf{append}(\textbf{float}(currentline[5])); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ user$\_$list\ =\ "{},user$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ nice$\_$list\ =\ "{},nice$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ system$\_$list\ =\ "{},system$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ iowait$\_$list\ =\ "{},iowait$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ steal$\_$list\ =\ "{},steal$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ idle$\_$list\ =\ "{},idle$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$flag\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ device$\_$flag\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (cpu$\_$flag\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ Reading\ and\ storing\ CPU\ headers"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$labels\ =\ []; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$labels\ =\ currentline; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ cpu$\_$labels\ =\ "{},cpu$\_$labels} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (time$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ Read\ time\ information"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ date$\_$list.\textbf{append}(currentline[0].\textbf{replace}(\texttt{"{}/"{}},\texttt{"{}\ "{}})); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ if\ meridian\ is\ PM\ then\ need\ to\ add\ 12\ hours\ to\ time$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ time$\_$list.\textbf{append}(currentline[1]); \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ date$\_$list\ =\ "{},date$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ \ \ \ time$\_$list\ =\ "{},time$\_$list} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ time$\_$flag\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$flag\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ icount\ =\ icount\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (info$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ Read\ system\ information"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}OS"{}}]\ =\ currentline[0]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}kernel"{}}]\ =\ currentline[1]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}system$\_$name"{}}]\ =\ currentline[2][1:\textbf{len}(currentline[2])-1]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}date"{}}]\ =\ currentline[3]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}CPU"{}}]\ =\ currentline[4]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ system$\_$info[\texttt{"{}cores"{}}]\ =\ currentline[5][1:]; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ info$\_$flag\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ time$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textit{\#print\ "{}\ \ \ system$\_$info:"{},system$\_$info} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#print\ "{}Finished\ reading\ section\ -\ get\ ready\ for\ next\ section"{};} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (device$\_$flag\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ device$\_$flag\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ time$\_$flag\ =\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ cpu$\_$flag\ =\ -1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ info$\_$flag\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Finished\ reading\ "{}},icount,\texttt{"{}\ data\ points\ for\ "{}},\textbf{len}(device$\_$data$\_$list),\texttt{"{}\ devices."{}}; \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Creating\ plots\ and\ HTML\ report"{}}; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Create\ time\ list\ for\ x-axis\ data\ (need\ to\ convert\ to\ regular\ time\ format)} \\
\mbox{}\ \ \ x$\_$seconds\ =\ []; \\
\mbox{}\ \ \ \textbf{for}\ i\ \textbf{in}\ \textbf{range}(0,\textbf{len}(date$\_$list)): \\
\mbox{}\ \ \ \ \ \ test2\ =\ shlex.\textbf{split}(date$\_$list[i]); \\
\mbox{}\ \ \ \ \ \ test3\ =\ test2[2]\ +\ \texttt{"{}-"{}}\ +\ test2[0]\ +\ \texttt{"{}-"{}}\ +\ test2[1]; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ junk1\ =\ test3\ +\ \texttt{"{}\ "{}}\ +\ time$\_$list[i]; \\
\mbox{}\ \ \ \ \ \ ts\ =\ time.\textbf{mktime}(time.\textbf{strptime}(junk1,\ \texttt{'\%Y-\%m-\%d\ \%H:\%M:\%S'})); \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (i\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ BeginTime\ =\ ts; \\
\mbox{}\ \ \ \ \ \ \ \ \ x$\_$seconds.\textbf{append}(0.0); \\
\mbox{}\ \ \ \ \ \ \textbf{else}: \\
\mbox{}\ \ \ \ \ \ \ \ \ x$\_$seconds.\textbf{append}(\ (ts\ -\ BeginTime)\ ); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textit{\#\ end\ of} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ "{}Total"{}\ CPU\ utilziation\ (user\ +\ system)} \\
\mbox{}\ \ \ time$\_$sum$\_$list\ =\ []; \\
\mbox{}\ \ \ \textbf{for}\ i\ \textbf{in}\ \textbf{range}(0,\textbf{len}(user$\_$list)): \\
\mbox{}\ \ \ \ \ \ \ time$\_$sum$\_$list.\textbf{append}(\ (user$\_$list[i]\ +\ system$\_$list[i])\ ); \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ } \\
\mbox{}\ \ \ \textit{\#\ HTML\ Report\ initialization} \\
\mbox{}\ \ \ \textit{\#\ \ \ \ Write\ all\ data\ files\ to\ subdirectory\ called\ HTML$\_$REPORT} \\
\mbox{}\ \ \ \textit{\#\ \ \ \ File\ is\ report.html} \\
\mbox{}\ \ \ dirname\ =\texttt{"{}./REPORT"{}}; \\
\mbox{}\ \ \ \textbf{if}\ \textbf{not}\ os.path.\textbf{exists}(dirname): \\
\mbox{}\ \ \ \ \ \ os.\textbf{makedirs}(dirname); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ html$\_$filename\ =\ dirname\ +\ \texttt{'/report.html'}; \\
\mbox{}\ \ \ f\ =\ \textbf{open}(html$\_$filename,\ \texttt{'w'}) \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Print\ HTML\ Report\ header} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H2\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}IOSTAT\ Report\ for\ file:\ "{}}\ +\ input$\_$filename\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H2\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ Introduction} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Introduction\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}P\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}This\ report\ plots\ the\ iostat\ output\ contained\ in\ file:\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ input$\_$filename\ +\ \texttt{"{}.\ The\ devices\ analyzed\ are:\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}UL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}"{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/UL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}For\ each\ devices\ there\ are\ a\ series\ of\ plots\ of\ the\ output\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}from\ iostat\ that\ was\ captured.\ The\ report\ is\ contained\ in\ a\textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}subdirectory\ HTML$\_$REPORT.\ In\ that\ directory\ you\ will\ find\ a\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}file\ name\ report.html.\ Just\ open\ that\ file\ in\ a\ browser\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}and\ you\ will\ see\ the\ plots.\ Please\ note\ that\ all\ plots\ are\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}referenced\ to\ the\ beginning\ time\ of\ the\ iostat\ run.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \textbf{elif}(combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/UL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}There\ are\ a\ series\ of\ plots\ from\ the\ captured\ iostat\ output\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}where\ all\ devices\ are\ plotted\ together\ where\ possible.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}The\ report\ is\ contained\ in\ a\textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}subdirectory\ HTML$\_$REPORT.\ In\ that\ directory\ you\ will\ find\ a\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}file\ name\ report.html.\ Just\ open\ that\ file\ in\ a\ browser\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}and\ you\ will\ see\ the\ plots.\ Please\ note\ that\ all\ plots\ are\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}referenced\ to\ the\ beginning\ time\ of\ the\ iostat\ run.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ System\ Output\ (from\ iostat):} \\
\mbox{}\ \ \ output$\_$str\ =\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}IOstat\ outputs\ a\ number\ of\ basic\ system\ parameters\ when\ it\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}creates\ the\ output.\ These\ parameters\ are\ listed\ below.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}UL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}System\ Name:\ "{}}\ +\ system$\_$info[\texttt{"{}system$\_$name"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}OS:\ "{}}\ +\ system$\_$info[\texttt{"{}OS"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}Kernel:\ "{}}\ +\ system$\_$info[\texttt{"{}kernel"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}Number\ of\ Cores\ "{}}\ +\ system$\_$info[\texttt{"{}cores"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}Core\ Type\ "{}}\ +\ system$\_$info[\texttt{"{}CPU"{}}]\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/UL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}The\ iostat\ run\ was\ started\ on\ "{}}\ +\ system$\_$info[\texttt{"{}date"{}}]\ +\ \texttt{"{}\ at\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ time$\_$list[0]\ +\ \texttt{"{}.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ HTML\ hyperlinks} \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Below\ are\ hyperlinks\ to\ various\ plots\ within\ the\ report\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}for\ each\ device.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}Below\ are\ hyperlinks\ to\ various\ plots\ within\ the\ report\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}where\ all\ of\ the\ devices\ are\ plotted\ together\ on\ each\ chart.\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}BR\textgreater{}\textless{}BR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ iloop\ =\ -1; \\
\mbox{}\ \ \ plots$\_$per$\_$device\ =\ 11; \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ max$\_$plots\ =\ plots$\_$per$\_$device\ *\ \textbf{len}(device$\_$data$\_$list); \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ max$\_$plots\ =\ plots$\_$per$\_$device; \\
\mbox{}\ \ \ \textit{\#end\ if} \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ iloop\ =\ iloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}strong\textgreater{}"{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/strong\textgreater{}:\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ (iloop)*plots$\_$per$\_$device+1; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}OL\ start="{}}\ +\ \textbf{str}(junk1)\ +\ \texttt{"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}iowait$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}IOwait\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}steal$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Steal\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}idle$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Idle\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}rmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}wmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Write\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$complete$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Complete\ Rate,\ Write\ Requests\ Complete\ Rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$merged$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Merged\ Rate,\ Write\ Requests\ Merged\ Rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$queue$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Size,\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\ Percentage\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}avg$\_$wait$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Read\ Request\ Time,\ Average\ Write\ Request\ Time,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Time\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/OL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ iloop\ =\ 0; \\
\mbox{}\ \ \ \ \ \ iloop\ =\ iloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}OL\ start="{}}\ +\ \textbf{str}(iloop)\ +\ \texttt{"{}\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}iowait$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}IOwait\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}steal$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Steal\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}idle$\_$cpu$\_$utilization"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Idle\ Percentage\ Time\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}rmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}wmb$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Write\ Throughput\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$complete$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Complete\ Rate,\ Write\ Requests\ Complete\ Rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$merged$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Read\ Requests\ Merged\ Rate,\ Write\ Requests\ Merged\ Rate,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}requests$\_$queue$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Size,\ Average\ Queue\ Length,\ and\ Total\ CPU\ Utilization\ Percentage\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}avg$\_$wait$\_$time$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Read\ Request\ Time,\ Average\ Write\ Request\ Time,\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Average\ Request\ Time\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ junk1\ =\ \texttt{"{}util$\_$cpu$\_$total$\_$cpu"{}}\ +\ \textbf{str}(iloop); \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \ \ \textless{}LI\textgreater{}\textless{}a\ href=\textbackslash{}"{}\#"{}}\ +\ junk1\ +\ \texttt{"{}\textbackslash{}"{}\textgreater{}Percentage\ CPU\ Time\ for\ IO\ Requests\ and\ Total\ CPU\ Utilization\textless{}/a\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/OL\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\textless{}/P\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ output$\_$str\ +\ \texttt{"{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \textit{\#endif} \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Create\ array\ of\ line\ colors/styles:} \\
\mbox{}\ \ \ \textit{\#\ http://matplotlib.org/api/artist$\_$api.html\#matplotlib.lines.Line2D.lineStyles} \\
\mbox{}\ \ \ \textit{\#\ line$\_$style\ =\ ['-',\ '-\/-',\ '-.'];} \\
\mbox{}\ \ \ \textit{\#\ line$\_$marker\ \ =\ ['o',\ '\textasciicircum{}',\ 's',\ '*',\ '+',\ '\textless{}',\ '\textgreater{}',\ 'v'];} \\
\mbox{}\ \ \ color$\_$list\ =\ [\texttt{'b'},\ \texttt{'g'},\ \texttt{'r'},\ \texttt{'c'},\ \texttt{'m'},\ \texttt{'y'},\ \texttt{'k'}]; \\
\mbox{}\ \ \ line$\_$style\ =\ [\texttt{'o-'},\ \texttt{'\textasciicircum{}-\/-'},\ \texttt{'s-.'},\ \texttt{'*-'},\ \texttt{'\textless{}-\/-'},\ \texttt{'\textgreater{}-.'},\ \texttt{'v-'},\ \texttt{'o-\/-'}]; \\
\mbox{}\ \ \ line$\_$list\ =\ []; \\
\mbox{}\ \ \ \textbf{for}\ line$\_$type\ \textbf{in}\ line$\_$style: \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ color\ \textbf{in}\ color$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ junk2\ =\ color\ +\ line$\_$type; \\
\mbox{}\ \ \ \ \ \ \ \ \ line$\_$list.\textbf{append}(junk2); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \textit{\#\ end\ for} \\
\mbox{} \\
\mbox{}\ \ \ \textit{\#\ Create\ files\ with\ useful\ analytics\ data\ \ \ } \\
\mbox{} \\
\mbox{}\ \ \ avg$\_$file\ =\ \textbf{open}(dirname\ +\ \texttt{'/averages'},\ \texttt{'w'}) \\
\mbox{}\ \ \ data$\_$file\ =\ \textbf{open}(dirname\ +\ \texttt{'/data'},\ \texttt{'w'}) \\
\mbox{}\ \ \ first$\_$it\ =\ 0 \\
\mbox{} \\
\mbox{}\ \ \ \textbf{for}\ dev\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ avg$\_$file.\textbf{write}(dev[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ averages:\textbackslash{}n"{}}) \\
\mbox{}\ \ \ \ \ \ data$\_$file.\textbf{write}(dev[\texttt{"{}device"{}}]\ +\ \texttt{"{}\ data:\textbackslash{}n"{}}) \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ it\ \textbf{in}\ dev: \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (it\ !=\ \texttt{"{}device"{}}): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ avg$\_$file.\textbf{write}(\texttt{'\textbackslash{}t'}\ +\ it\ +\ \texttt{"{}:\ "{}}\ +\ \textbf{str}(\textbf{sum}(dev[it])/\textbf{float}(\textbf{len}(dev[it])))\ +\ \texttt{'\textbackslash{}n'}) \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{if}\ (first$\_$it\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ first$\_$it\ =\ -1 \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ data$\_$file.\textbf{write}(\textbf{str}(\textbf{len}(dev[it]))\ +\ \texttt{"{}\ datos\ recogidos\textbackslash{}n"{}}) \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ data$\_$file.\textbf{write}(it\ +\ \texttt{'\textbackslash{}n'}\ +\ \textbf{str}(dev[it])\ +\ \texttt{'\textbackslash{}n'})\ \ \  \\
\mbox{} \\
\mbox{}\ \ \ avg$\_$file.\textbf{close}() \\
\mbox{}\ \ \ data$\_$file.\textbf{close}() \\
\mbox{} \\
\mbox{} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#\ Actually\ create\ the\ plots!!} \\
\mbox{}\ \ \ \textit{\#} \\
\mbox{}\ \ \ \textit{\#print\ x$\_$seconds} \\
\mbox{}\ \ \  \\
\mbox{} \\
\mbox{}\ \ \ \textbf{if}\ (combined$\_$plots\ ==\ 0): \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Loop\ over\ each\ device\ and\ create\ plots\ and\ HTML:} \\
\mbox{}\ \ \ \ \ \ iloop\ =\ -1; \\
\mbox{}\ \ \ \ \ \ iplot\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \textbf{for}\ item\ \textbf{in}\ device$\_$data$\_$list: \\
\mbox{}\ \ \ \ \ \ \ \ \ iloop\ =\ iloop\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}Device:\ "{}},item[\texttt{"{}device"{}}]; \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}HR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}H3\textgreater{}Device:\ "{}}\ +\ item[\texttt{"{}device"{}}]\ +\ \texttt{"{}\textless{}/H3\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 1:\ Various\ CPU\ percentages\ (user,\ system,\ nice)\ vs.\ time\ (3\ subplots)} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot1}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ user$\_$list,\ system$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nice$\_$list,\ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 2:\ iowait\ percentage\ time} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ fsize\ =\ 6; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot2}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ iowait$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 3:\ Steal\ Time} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot3}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ steal$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 4:\ Idle\ Time} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot4}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ idle$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 5:\ Read\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ fsize\ =\ 6; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot5}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 6:\ Write\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot6}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 7:\ Read\ Request\ complete\ rate,\ Write\ Request\ complete\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ HTML\ report\ output\ (opt\ of\ section)} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ fsize\ =\ 6 \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot7}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 8:\ Read\ Request\ merge\ rate,\ Write\ Request\ merge\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot8}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 9:\ Avg.\ Request\ Size,\ Avg.\ Queue\ Length,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 10:\ Average\ Wait\ Times\ for\ read,\ write\ requests} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{plot10v9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \textbf{plot10v10}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \ \ \ \textit{\#\ Figure\ 11:\ Percentage\ CPU\ Util} \\
\mbox{}\ \ \ \ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot11}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ for} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \textbf{elif}\ (combined$\_$plots\ ==\ 1): \\
\mbox{}\ \ \ \ \ \ \textit{\#\ For\ each\ plot,\ Loop\ over\ each\ device\ and\ create\ plot\ and\ HTML:} \\
\mbox{}\ \ \ \ \ \ iloop\ =\ 1; \\
\mbox{}\ \ \ \ \ \ iplot\ =\ 0; \\
\mbox{}\ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ output$\_$str\ =\ \texttt{"{}\textless{}HR\textgreater{}\ \textbackslash{}n"{}}; \\
\mbox{}\ \ \ \ \ \ f.\textbf{write}(output$\_$str); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 1:\ Various\ CPU\ percentages\ (user,\ system,\ nice)\ vs.\ time\ (3\ subplots)} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot1}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ user$\_$list,\ system$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ nice$\_$list,\ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 2:\ iowait\ percentage\ time} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot2}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ iowait$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 3:\ Steal\ Time} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot3}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ steal$\_$list,\  \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 4:\ Idle\ Time} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot4}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ idle$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 5:\ Read\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ fsize\ =\ 6; \\
\mbox{}\ \ \ \ \ \ \textbf{plot5}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 6:\ Write\ Throughput\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot6}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 7:\ Read\ Request\ complete\ rate,\ Write\ Request\ complete\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot7}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 8:\ Read\ Request\ merge\ rate,\ Write\ Request\ merge\ rate,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot8}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 9:\ Avg.\ Request\ Size,\ Avg.\ Queue\ Length,\ and\ Total\ CPU\ Utilization} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 10:\ Average\ Wait\ Times\ for\ read,\ write\ requests} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{if}\ (vflag\ ==\ 9): \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot10v9}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{elif}\ (vflag\ ==\ 10): \\
\mbox{}\ \ \ \ \ \ \ \ \ \textbf{plot10v10}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textit{\#\ end\ if} \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{} \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Figure\ 11:\ Percentage\ CPU\ Util} \\
\mbox{}\ \ \ \ \ \ iplot\ =\ iplot\ +\ 1; \\
\mbox{}\ \ \ \ \ \ \textbf{plot11}(iloop,\ iplot,\ combined$\_$plots,\ f,\ dirname,\ x$\_$seconds,\ time$\_$sum$\_$list, \\
\mbox{}\ \ \ \ \ \ \ \ \ \ \ \ \ fsize,\ item,\ device$\_$data$\_$list,\ line$\_$list); \\
\mbox{}\ \ \ \ \ \ \textbf{print}\ \texttt{"{}\ \ \ Finished\ Plot\ "{}},iplot,\texttt{"{}\ of\ "{}},max$\_$plots; \\
\mbox{}\ \ \ \textit{\#\ end\ of} \\
\mbox{}\ \ \ \textbf{print}\ \texttt{"{}Finished.\ Please\ open\ the\ document\ HTML$\_$REPORT/report.html\ in\ a\ browser."{}}; \\
\mbox{}\ \ \  \\
\mbox{}\ \ \ \textit{\#\ Start\ of\ Pickling} \\
\mbox{}\ \ \ \textit{\#\ =================} \\
\mbox{}\ \ \ \textbf{if}\ (pickle$\_$success\ \textgreater{}\ 0): \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Open\ file\ for\ pickling} \\
\mbox{}\ \ \ \ \ \ pickle$\_$file\ =\ \textbf{open}(\texttt{'iostat$\_$file.pickle'},\ \texttt{'w'}) \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Big\ dictionary:} \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Create\ CPU\ dictionary\ for\ pickling:} \\
\mbox{}\ \ \ \ \ \ cpu$\_$data\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}user$\_$list"{}}]\ =\ user$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}nice$\_$list"{}}]\ =\ nice$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}system$\_$list"{}}]\ =\ system$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}iowait$\_$list"{}}]\ =\ iowait$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}steal$\_$list"{}}]\ =\ steal$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}idle$\_$list"{}}]\ =\ idle$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}cpu$\_$labels"{}}]\ =\ cpu$\_$labels; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}time$\_$sum$\_$list"{}}]\ =\ time$\_$sum$\_$list; \\
\mbox{}\ \ \ \ \ \ cpu$\_$data[\texttt{"{}version"{}}]\ =\ vflag; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Time\ dictionary\ for\ pickling:} \\
\mbox{}\ \ \ \ \ \ time$\_$data\ =\ \{\}; \\
\mbox{}\ \ \ \ \ \ time$\_$data[\texttt{"{}date$\_$list"{}}]\ =\ date$\_$list; \\
\mbox{}\ \ \ \ \ \ time$\_$data[\texttt{"{}time$\_$list"{}}]\ =\ time$\_$list; \\
\mbox{}\ \ \ \ \ \ time$\_$data[\texttt{"{}meridian$\_$list"{}}]\ =\ meridian$\_$list; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Device\ data} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data\ =\ \{\};} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}rrqm"{}]\ =\ device$\_$data$\_$list["{}rrqm"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}wrqm"{}]\ =\ device$\_$data$\_$list["{}wrqm"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}r"{}]\ =\ device$\_$data$\_$list["{}r"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}w"{}]\ =\ device$\_$data$\_$list["{}w"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}rMB"{}]\ =\ device$\_$data$\_$list["{}rMB"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}wMB"{}]\ =\ device$\_$data$\_$list["{}wMB"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}avgrqsz"{}]\ =\ device$\_$data$\_$list["{}avgrqsz"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}avgqusz"{}]\ =\ device$\_$data$\_$list["{}avgqusz"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}await"{}]\ =\ device$\_$data$\_$list["{}await"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}r$\_$await"{}]\ =\ device$\_$data$\_$list["{}r$\_$await"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}w$\_$await"{}]\ =\ device$\_$data$\_$list["{}w$\_$await"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}svctm"{}]\ =\ device$\_$data$\_$list["{}svctm"{}];} \\
\mbox{}\ \ \ \ \ \ \textit{\#device$\_$data["{}util"{}]\ =\ device$\_$data$\_$list["{}util"{}];} \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Assemble\ the\ big\ pickle;} \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict[\texttt{"{}device$\_$data$\_$list"{}}]\ =\ device$\_$data$\_$list; \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict[\texttt{"{}cpu$\_$data"{}}]\ =\ cpu$\_$data; \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict[\texttt{"{}system$\_$info"{}}]\ =\ system$\_$info; \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict[\texttt{"{}time$\_$data"{}}]\ =\ time$\_$data; \\
\mbox{}\ \ \ \ \ \ iostat$\_$dict[\texttt{"{}x$\_$seconds"{}}]\ =\ x$\_$seconds; \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Write\ list\ to\ pickle\ file} \\
\mbox{}\ \ \ \ \ \ pickle.\textbf{dump}(iostat$\_$dict,\ pickle$\_$file); \\
\mbox{}\ \ \ \ \ \  \\
\mbox{}\ \ \ \ \ \ \textit{\#\ Close\ pickle\ file} \\
\mbox{}\ \ \ \ \ \ pickle$\_$file.\textbf{close}(); \\
\mbox{}\ \ \ \textit{\#\ end\ if} \\
\mbox{}\textit{\#\ end} \\
\mbox{}
